# 穿透击穿雪崩

## 穿透

大量查询不到的数据的请求落到后端数据库，数据库压力增大
- 由于大量缓存查不到就去数据库取，数据库也没有要查的数据
- 解决：对于没查到返回为None的数据也缓存
- 插入数据的时候删除相应缓存，或者设置较短的超时时间

## 击穿

某些非常热点的数据key过期，大量请求打倒后端数据库
- 热点数据key失效导致大量请求打到数据库增加数据库压力
- 分布式锁：获取锁的线程从数据库拉数据更新缓存，其他线程等待
- 异步后台更新：后台任务针对过期的key自动刷新

## 雪崩

缓存不可用或者大量缓存key同时失效，大量请求直接打到数据库
- 多级缓存：不同级别的key设置不同的超时时间
- 随机超时：key的超时时间随机设置，防止同时超时
- 架构层：提升系统可用性。监控、报警完善

