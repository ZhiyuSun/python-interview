# tcp粘包

## tcp底层的粘包/拆包机制

业务上一个包可能被tcp拆成多个包发送

分析TCP粘包、拆包问题的产生原因：
- 应用程序write写入的字节大小大于套接口发送缓冲区的大小
- 进行MSS大小的TCP分段、以太网帧的payload大于MTU进行IP分片等

## Netty TCP拆包粘包问题的处理

粘包拆包问题的解决方案，根据业界主流协议，有三种方案：
- 消息定长，例如每个报文的大小固定为200个字节，如果不够，空位补空格
- 在包尾部增加特殊字符进行分割，例如加回车等
- 消息分为消息头和消息体，在消息头中包含表示消息总长度的字段，然后进行业务处理

（定长，特殊分割符，自定义协议栈）

